{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["get","axios","App","props","state","data","setNewData","bind","setStartDate","setEndDate","checkboxMovement","clearUrl","url","this","storedUrl","window","prompt","Cookies","set","rawRows","split","rows","map","CSV","row","push","fetchData","then","console","log","catch","err","error","newData","sum","forEach","element","index","numeral","value","momentDate","moment","date","format","dateMillis","toDate","getTime","motive","toLowerCase","ammount","sum_display","parseFloat","Number","toFixed","movements","setState","parseNewMovements","setMovements","filterdMovements","recalculateData","getFilteredMovements","byMonths","groupByMonths","mothlySummary","getMothlySummary","getCushionMonths","length","newState","cushion","months","expense_per_m","last_months_expenses","startDate","Date","endDate","startMonth","startOf","endMonth","arrangedMonths","currentMonth","isAfter","add","sorted","month","monthDate","sortedRecord","filter","skipped","movement","isSame","processed","monthRecord","earnings","expenses","resulting","sort","element1","element2","isBefore","totalAverageEarnings","reduce","accumulator","currentValue","totalAverageExpenses","total","filtered","endDateMillis","startDateMillis","startIndex","endIndex","isNaN","slice","Math","floor","number","round2","accumulated","averageMothlyExpenses","current","JSON","parse","stringify","setTimeout","location","reload","containerId","document","getElementById","offsetWidth","Container","id","Button","onClick","dateFormat","selected","onChange","LineChart","width","getWidth","height","chartHeight","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","Tooltip","Legend","Line","type","stroke","BarChart","getGeneralMothlyBarChart","Bar","fill","Table","Form","Group","controlId","Check","label","checked","replace","innerHeight","React","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.86777755.chunk.js","sourcesContent":["import moment from 'moment';\nimport React from 'react';\nimport CSVReader from 'react-csv-reader';\nimport numeral from 'numeral';\nimport { Bar, BarChart, CartesianGrid, Legend, Line, LineChart, Tooltip, XAxis, YAxis } from 'recharts';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Button, Container, Form, Table } from 'react-bootstrap';\nimport * as axios from 'axios'\nimport * as CSV from \"csv-string\";\nimport Cookies from 'js-cookie'\n\n\nconst {get} = axios.default;\n\nexport class App extends React.Component {\n\tstate = {\n\t\tdata: null\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.setNewData = this.setNewData.bind(this);\n\t\tthis.setStartDate = this.setStartDate.bind(this);\n\t\tthis.setEndDate = this.setEndDate.bind(this);\n\t\tthis.checkboxMovement = this.checkboxMovement.bind(this);\n\t\tthis.clearUrl = this.clearUrl.bind(this);\n\t}\n\n\tget storedUrl(){\n\t\treturn Cookies.get('url');\n\t}\n\n\tset storedUrl(url){\n\t\tCookies.set(\"url\", url);\n\t}\n\n\tasync fetchData(){\n\t\tlet url = this.storedUrl;\n\t\tif(!url){\n\t\t\tthis.storedUrl = window.prompt(\"Please enter the URL to search:\")\n\t\t\turl = this.storedUrl;\n\t\t\tCookies.set(\"url\", url);\n\t\t}\n\t\tconst {data} = await get(url);\n\t\tconst rawRows = data.split(\"\\n\");\n\t\tconst rows = [];\n\t\trawRows.map((data)=>{\n\t\t\tCSV.read(data, ',', row => {\n\t\t\t\trows.push(row);\n\t\t\t});\n\t\t})\n\t\treturn rows;\n\t}\n\n\tcomponentDidMount() {\n\t\t//this.setNewData(data);\n\t\tthis.fetchData()\n\t\t.then((data)=>{\n\t\t\tconsole.log({data});\n\t\t\tthis.setNewData(data);\n\t\t}).catch((err)=>{\n\t\t\tconsole.error({err});\n\t\t})\n\t}\n\n\t/**\n\t * @description Parses the data from  a CSV \n\t */\n\tparseNewMovements(data){\n\t\tlet newData = [];\n\t\tlet sum = 0;\n\t\tdata.forEach((element, index) => {\n\t\t\tif (index == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsum += numeral(element[2]).value();\n\t\t\tlet momentDate = moment(element[0], \"DD/MM/YYYY\");\n\t\t\tnewData.push({\n\t\t\t\tdate: momentDate.format(\"DD/MM/YYYY\"),\n\t\t\t\tdateMillis: momentDate.toDate().getTime(),\n\t\t\t\tmotive: element[1].toLowerCase(),\n\t\t\t\tammount: numeral(element[2]).value(),\n\t\t\t\tsum: sum,\n\t\t\t\tsum_display: parseFloat(Number(sum).toFixed(2))\n\t\t\t});\n\t\t});\n\t\treturn newData;\n\t}\n\n\trecalculateData(movements){\n\t\tlet sum = 0;\n\t\tlet newData = [];\n\t\tmovements.forEach((element, index) => {\n\t\t\tif (index == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsum += element.ammount;\n\t\t\tlet momentDate = moment(element.date, \"DD/MM/YYYY\");\n\t\t\tnewData.push({\n\t\t\t\tdate: momentDate.format(\"DD/MM/YYYY\"),\n\t\t\t\tdateMillis: momentDate.toDate().getTime(),\n\t\t\t\tmotive: element.motive.toLowerCase(),\n\t\t\t\tammount: element.ammount,\n\t\t\t\tsum,\n\t\t\t\tsum_display: parseFloat(Number(sum).toFixed(2))\n\t\t\t});\n\t\t});\n\t\treturn newData;\n\t}\n\n\tsetNewData(data) {\n\t\tconsole.log({data});\n\t\tthis.setState({\n\t\t\tmovements: this.parseNewMovements(data)\n\t\t}, ()=>this.setMovements());\n\t}\n\n\tsetMovements(){\n\t\tconst movements = this.state.movements;\n\t\tconst filterdMovements = this.recalculateData(this.getFilteredMovements(movements));\n\t\tconst byMonths = this.groupByMonths(filterdMovements);\n\t\tconst mothlySummary = this.getMothlySummary(byMonths);\n\t\tlet {months, last_months_expenses} = this.getCushionMonths(mothlySummary, filterdMovements[filterdMovements.length - 1].sum);\n\t\tconst newState = {\n\t\t\tfilterdMovements,\n\t\t\tbyMonths,\n\t\t\tmothlySummary,\n\t\t\tcushion: months,\n\t\t\texpense_per_m: last_months_expenses,\n\t\t\tstartDate: new Date(movements[0].dateMillis),\n\t\t\tendDate: new Date(movements[movements.length - 1].dateMillis)\n\t\t};\n\t\tthis.setState(newState);\n\t}\n\n\tsetStartDate(date) {\n\t\tthis.setState({\n\t\t\tstartDate: date\n\t\t})\n\t}\n\n\tsetEndDate(date) {\n\t\tthis.setState({\n\t\t\tendDate: date\n\t\t})\n\t}\n\n\t/**\n\t * \n\t * @param {{\"date\":string,\"dateMillis\":number,\"motive\":string,\"ammount\":number,\"sum\":number,\"sum_display\":number}[]} movements \n\t */\n\tgroupByMonths(movements) {\n\t\tlet startMonth = moment(movements[0].date, \"DD/MM/YYYY\").startOf(\"month\");\n\t\tlet endMonth = moment(movements[movements.length - 1].date, \"DD/MM/YYYY\").startOf(\"month\");\n\n\t\tlet months = [];\n\t\tlet arrangedMonths = false;\n\t\tlet currentMonth = startMonth;\n\t\tdo {\n\t\t\tif (currentMonth.isAfter(endMonth)) {\n\t\t\t\tarrangedMonths = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmonths.push(currentMonth.toDate());\n\t\t\tcurrentMonth = currentMonth.add(\"1\", \"month\").startOf(\"month\");\n\t\t} while (!arrangedMonths);\n\t\tlet sorted = months.map(element => {\n\t\t\treturn {\n\t\t\t\tmonth: moment(element),\n\t\t\t\tmonthDate: element,\n\t\t\t\tmovements: []\n\t\t\t}\n\t\t});\n\n\t\tsorted.forEach((sortedRecord, index) => {\n\t\t\tsortedRecord.movements = movements.filter(element => !!!element.skipped).filter(movement => {\n\t\t\t\treturn sortedRecord.month.isSame(new Date(movement.dateMillis), \"month\");\n\t\t\t})\n\t\t});\n\n\t\treturn sorted;\n\t}\n\n\tgetMothlySummary(byMonths) {\n\t\tconst processed = byMonths.map((monthRecord, index) => {\n\t\t\tlet earnings = 0, expenses = 0;\n\t\t\tmonthRecord.movements.filter(element => {\n\t\t\t\treturn (element.ammount > 0)\n\t\t\t}).forEach(element => {\n\t\t\t\tearnings += element.ammount;\n\t\t\t});\n\t\t\tmonthRecord.movements.filter(element => {\n\t\t\t\treturn (element.ammount < 0)\n\t\t\t}).forEach(element => {\n\t\t\t\texpenses += element.ammount;\n\t\t\t});\n\t\t\treturn {\n\t\t\t\t...monthRecord,\n\t\t\t\tearnings,\n\t\t\t\texpenses,\n\t\t\t\tresulting: earnings + expenses\n\t\t\t};\n\t\t}).sort((element1, element2)=>{\n\t\t\tif(element1.month.isAfter(element2.month)){\n\t\t\t\treturn 1;\n\t\t\t}else if(element1.month.isBefore(element2.month)){\n\t\t\t\treturn -1;\n\t\t\t}else{\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\t\tconst totalAverageEarnings = processed.map(element => element.earnings).reduce((accumulator, currentValue) => accumulator + currentValue) / processed.length;\n\t\tconst totalAverageExpenses = processed.map(element => element.expenses).reduce((accumulator, currentValue) => accumulator + currentValue) / processed.length;\n\t\treturn {\n\t\t\ttotal: processed,\n\t\t\ttotalAverageEarnings,\n\t\t\ttotalAverageExpenses\n\t\t}\n\t}\n\n\tgetFilteredMovements(data) {\n\t\tlet filtered = data;\n\t\tlet endDateMillis = this.state.endDate && this.state.endDate.getTime();\n\t\tlet startDateMillis = this.state.endDate && this.state.startDate.getTime();\n\t\tlet startIndex = null, endIndex = null;\n\t\tfiltered.forEach((element, index) => {\n\t\t\tif (\n\t\t\t\tstartDateMillis &&\n\t\t\t\t(element.dateMillis >= startDateMillis)\n\t\t\t\t&& startIndex == null\n\t\t\t) {\n\t\t\t\tstartIndex = index;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tendDateMillis &&\n\t\t\t\t(element.dateMillis >= endDateMillis)\n\t\t\t\t&& endIndex == null\n\t\t\t) {\n\t\t\t\tendIndex = index + 1;\n\t\t\t}\n\t\t});\n\t\tif(startIndex != null && !isNaN(startIndex) && startIndex != null && !isNaN(endIndex)){\n\t\t\tfiltered = filtered.slice(startIndex, endIndex) || [];\n\t\t}\n\t\tfiltered = filtered.map(element => {\n\t\t\t//We skip all ammounts equal to 150.\n\t\t\tif(Math.floor(element.ammount) == 150){\n\t\t\t\telement.skipped = true;\n\t\t\t}\n\t\t\treturn element\n\t\t});\n\t\tfiltered = filtered.filter(element => !!!element.skipped);\n\t\treturn filtered;\n\t}\n\n\tround2(number){\n\t\treturn parseFloat(Number(number).toFixed(2));\n\t}\n\n\tgetGeneralMothlyBarChart(){\n\t\t//mothlySummary\n\t\treturn this.state.mothlySummary\n\t\t.total.map(element => {\n\t\t\treturn {\n\t\t\t\tearnings: this.round2(element.earnings),\n\t\t\t\texpenses: this.round2(element.expenses*-1),\n\t\t\t\tresulting: this.round2(element.resulting),\n\t\t\t\tdate: element.month.format(\"MM/YYYY\"),\n\t\t\t}\n\t\t})\n\t}\n\n\tgetCushionMonths(mothlySummary, accumulated){\n\t\tlet length = mothlySummary.total.length;\n\t\tlet compareMonths = 4;\n\t\tlet compareMonthValues = mothlySummary.total\n\t\t\t.slice(length - compareMonths, length+1);\n\t\tlet averageMothlyExpenses = compareMonthValues\n\t\t\t.map(element => element.expenses)\n\t\t\t.reduce((accumulator, currentValue) => accumulator + currentValue);\n\t\taverageMothlyExpenses = this.round2(averageMothlyExpenses / compareMonths);\n\t\tlet months = this.round2((accumulated / averageMothlyExpenses)*-1);\n\t\treturn {months, last_months_expenses: averageMothlyExpenses}\n\t}\n\n\tcheckboxMovement(index){\n\t\tthis.setState((current)=>{\n\t\t\tlet movements = JSON.parse(JSON.stringify(current.movements));\n\t\t\tmovements[index].skipped = !movements[index].skipped;\n\t\t\t//current.movements = movements;\n\t\t\treturn {movements};\n\t\t}, () => {\n\t\t\tsetTimeout(()=>{\n\t\t\t\tthis.setMovements();\n\t\t\t}, 500)\n\t\t})\n\t}\n\n\tclearUrl(){\n\t\tthis.storedUrl = \"\";\n\t\twindow.location.reload();\n\t}\n\n\tgetWidth(containerId){\n\t\treturn document.getElementById(containerId) && document.getElementById(containerId).offsetWidth || 400;\n\t}\n\n\tget chartHeight(){\n\t\treturn window.innerHeight / 3;\n\t}\n\n\trender() {\n\t\tconst fileSource = false;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Container id=\"movement1\">\n\t\t\t\t\t<h1>Main Balance</h1>\n\t\t\t\t\t<Button onClick={this.clearUrl}>Clear URL</Button>\n\t\t\t\t</Container>\n\t\t\t\t{fileSource && <CSVReader onFileLoaded={this.setNewData} /> || <></>}\n\t\t\t\t{\n\t\t\t\t\tthis.state.filterdMovements && <Container id=\"movement2\">\n\t\t\t\t\t\t<h3>Movements</h3>\n\t\t\t\t\t\t<DatePicker dateFormat={\"dd/MM/yyyy\"} selected={this.state.startDate} onChange={this.setStartDate} />\n\t\t\t\t\t\t<DatePicker dateFormat={\"dd/MM/yyyy\"} selected={this.state.endDate} onChange={this.setEndDate} />\n\t\t\t\t\t\t<LineChart width={this.getWidth(\"movement1\")} height={this.chartHeight} data={this.state.filterdMovements}\n\t\t\t\t\t\t\tmargin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\n\t\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\n\t\t\t\t\t\t\t<XAxis dataKey=\"date\" />\n\t\t\t\t\t\t\t<YAxis />\n\t\t\t\t\t\t\t<Tooltip />\n\t\t\t\t\t\t\t<Legend />\n\t\t\t\t\t\t\t<Line type=\"monotone\" dataKey=\"ammount\" stroke=\"#8884d8\" />\n\t\t\t\t\t\t\t<Line type=\"monotone\" dataKey=\"sum\" stroke=\"#82ca9d\" />\n\t\t\t\t\t\t</LineChart>\n\t\t\t\t\t</Container> || <></>\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tthis.state.mothlySummary && <Container id=\"movement3\">\n\t\t\t\t\t\t<h3>Mothly Expenses / Earnings</h3>\n\t\t\t\t\t\t<BarChart width={this.getWidth(\"movement1\")} height={this.chartHeight} data={this.getGeneralMothlyBarChart()}>\n\t\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\n\t\t\t\t\t\t\t<XAxis dataKey=\"date\" />\n\t\t\t\t\t\t\t<YAxis />\n\t\t\t\t\t\t\t<Tooltip />\n\t\t\t\t\t\t\t<Legend />\n\t\t\t\t\t\t\t<Bar dataKey=\"earnings\" fill=\"green\" />\n\t\t\t\t\t\t\t<Bar dataKey=\"expenses\" fill=\"red\" />\n\t\t\t\t\t\t\t<Bar dataKey=\"resulting\" fill=\"blue\" />\n\t\t\t\t\t\t</BarChart>\n\t\t\t\t\t</Container> || <></>\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\t!Number.isNaN(this.state.cushion) && <Container>\n\t\t\t\t\t\t<h3>Expected cushion via last 4 - months averages <small>(expected time to stand without receiving income)</small></h3>\n\t\t\t\t\t\t<h4>{this.state.cushion} months ({this.state.expense_per_m}$/m)</h4>\n\t\t\t\t\t</Container>\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tthis.state.movements && <Container>\n\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Enabled</td>\n\t\t\t\t\t\t\t\t\t<td>Date</td>\n\t\t\t\t\t\t\t\t\t<td>Movement</td>\n\t\t\t\t\t\t\t\t\t<td>Motive</td>\n\t\t\t\t\t\t\t\t\t<td>Current Balance</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.state.movements.map((element, index) => (\n\t\t\t\t\t\t\t\t\t\t<tr key={`${index}-${element.date.replace(/\\//g, '-')}`}>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<Form>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Form.Group controlId=\"enabled\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Form.Check id={`enabled-${index}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Count in\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={()=>this.checkboxMovement(index)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={!element.skipped} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t{element.date}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t{element.ammount}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t{element.motive}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t{element.sum_display}\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</Table></Container> || <></>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}